# VTB_API_HACK
Open API VTB
**Проблематика:**

В настоящее время спецификация Open API в банковской сфере, разработанная в рамках инициативы Open Banking, покрывает только основные функции (например, доступ к информации о счёте, переводы средств и управление продуктами). Однако, для удовлетворения разнообразных клиентских потребностей требуется значительное расширение этого стандарта, так как современные финансовые учреждения предлагают широчайший спектр услуг, выходящих за рамки этих базовых операций. Основные проблемы внедрения текущей спецификации Open API заключаются в следующем:

1. **Ограниченность функционала:** Существующие спецификации не охватывают весь спектр банковских услуг, которые интересны клиентам. Необходимо добавить новые методы и возможности в API для создания более полного спектра услуг.

2. **Фрагментация систем и данных:** Различия в архитектурах и подходах к реализации банковских систем делают невозможным простое копирование существующих API в универсальную спецификацию, поскольку не все методы и подходы совместимы друг с другом.

3. **Гибкость и масштабируемость:** Спецификация должна быть гибкой и расширяемой, чтобы удовлетворить потребности не только сегодняшнего, но и будущего рынка. Это требует разработки универсальных API-методов, способных адаптироваться к новым требованиям.

**Решение:**

Для решения данных проблем предлагается создать на хакатоне прототип банковского приложения, использующего расширенную спецификацию Open API. В рамках работы участникам предстоит:

1. **Расширение текущей спецификации Open API:** Необходимо предложить и детализировать новые методы API, которые бы включали дополнительные банковские операции и функции, выходящие за рамки текущего стандарта. Примерный перечень функций, которые могут быть добавлены:

   - **Управление инвестиционными продуктами**: методы для получения информации об инвестициях, создании инвестиционных запросов, управлении портфелем.
   - **Кредитование и займы**: создание запросов на получение займа, отслеживание выплат, запрос на реструктуризацию займа.
   - **Услуги по страхованию**: получение информации о страховых продуктах, управление полисами и возмещениями.
   - **Аналитика и финансовое планирование**: инструменты для анализа транзакций, построения бюджета и планирования финансов.
   - **Поддержка мультивалютных счетов**: управление валютными операциями, конвертация валют, получение обменных курсов.

2. **Проектирование универсального формата данных:** Спецификации данных должны быть унифицированы, чтобы их можно было применять в разных системах. Следует учитывать формат и тип данных, передаваемых через API (JSON или XML), требования к полям (например, `currency`, `amount`, `transaction_id`, `customer_id`), а также использовать универсальные стандарты (ISO для валют, IBAN для номеров счетов и т.д.).

3. **Создание гибких и расширяемых спецификаций:** API-методы должны поддерживать возможные изменения в будущем. Например, реализация методов с использованием REST или GraphQL позволит гибче управлять передаваемыми данными, поддерживать различные типы запросов (например, `GET`, `POST`, `PUT`) и упрощать масштабирование.

**Требования к прототипу:**

- **Функциональность и разнообразие:** Прототип приложения должен демонстрировать работу с несколькими банковскими услугами, включающими как базовые, так и новые функции, которые будут добавлены в спецификацию API.
- **Интерфейс для пользователей и взаимодействие с API:** Создать интерфейс, который позволяет пользователю удобно взаимодействовать с API для запроса и управления банковскими услугами.
- **Тестирование с заглушками:** Участникам предоставляются тестовые стенды с заглушками, что позволит тестировать прототип на совместимость с новой спецификацией и корректность работы API.

**Описание новых методов API:**

Каждый новый метод должен включать описание следующих характеристик:

1. **Название метода и назначение**: Краткое описание операции, которую метод выполняет, и какие задачи решает.
2. **Тип запроса и структура данных**: Определение типа запроса (например, `GET`, `POST`, `PUT`), структуры передаваемых данных, и необходимых полей (например, `loan_request_id`, `insurance_policy_id`, `transaction_amount`).
3. **Формат ответа**: Формат ответа от API, включая необходимые поля, коды ответа, возможные ошибки и их описание.
4. **Безопасность и аутентификация**: Описание требований к безопасности (например, OAuth 2.0, TLS) и защиты данных (например, шифрование, токены доступа).

**Пример метода: Запрос на открытие инвестиционного счета**

- **Название метода**: `CreateInvestmentAccount`
- **Тип запроса**: `POST`
- **Тело запроса**:
  ```json
  {
    "customer_id": "string",
    "account_type": "string",
    "initial_deposit": "float",
    "currency": "string"
  }
  ```
- **Ответ**:
  ```json
  {
    "account_id": "string",
    "status": "string",
    "creation_date": "date",
    "currency": "string"
  }
  ```
- **Ошибки**: `400` (Некорректный запрос), `403` (Недостаточно прав), `500` (Ошибка сервера).

Эти меры позволят создать универсальную и масштабируемую спецификацию API, способную удовлетворять разнообразные потребности банковского сектора и быть адаптированной под разные системы и требования.
Для разработки унифицированной и гибкой спецификации методов API, которая будет удовлетворять потребности большинства банковских организаций, важно учитывать разнообразие операций, их универсальность и возможности для дальнейшего расширения. Ниже предлагаются основные методы API, которые охватывают широкий спектр банковских операций, с указанием их общей структуры и примеров данных.

### 1. **Управление счетами**

#### Метод: `GetAccountInfo`
- **Описание**: Получение информации о банковском счёте клиента.
- **Тип запроса**: `GET`
- **Эндпоинт**: `/api/v1/accounts/{account_id}`
- **Параметры**:
  - `account_id` (string, path): Идентификатор счёта.
- **Пример ответа**:
  ```json
  {
    "account_id": "12345",
    "account_type": "savings",
    "currency": "USD",
    "balance": 5000.50,
    "status": "active",
    "created_at": "2023-01-01T10:00:00Z",
    "customer_id": "67890"
  }
  ```

#### Метод: `CreateAccount`
- **Описание**: Создание нового банковского счета.
- **Тип запроса**: `POST`
- **Эндпоинт**: `/api/v1/accounts`
- **Тело запроса**:
  ```json
  {
    "customer_id": "67890",
    "account_type": "checking",
    "currency": "USD",
    "initial_deposit": 100.00
  }
  ```
- **Пример ответа**:
  ```json
  {
    "account_id": "12345",
    "status": "active"
  }
  ```

### 2. **Платежи и переводы**

#### Метод: `InitiatePayment`
- **Описание**: Инициирование платежа между счетами.
- **Тип запроса**: `POST`
- **Эндпоинт**: `/api/v1/payments`
- **Тело запроса**:
  ```json
  {
    "source_account_id": "12345",
    "destination_account_id": "54321",
    "amount": 200.00,
    "currency": "USD",
    "description": "Invoice payment",
    "schedule_date": "2023-05-01T10:00:00Z"
  }
  ```
- **Пример ответа**:
  ```json
  {
    "payment_id": "67890",
    "status": "pending",
    "created_at": "2023-04-01T10:00:00Z"
  }
  ```

#### Метод: `GetPaymentStatus`
- **Описание**: Получение статуса платежа.
- **Тип запроса**: `GET`
- **Эндпоинт**: `/api/v1/payments/{payment_id}/status`
- **Параметры**:
  - `payment_id` (string, path): Идентификатор платежа.
- **Пример ответа**:
  ```json
  {
    "payment_id": "67890",
    "status": "completed",
    "completed_at": "2023-05-01T12:00:00Z"
  }
  ```

### 3. **Кредитование**

#### Метод: `ApplyForLoan`
- **Описание**: Подать заявку на получение кредита.
- **Тип запроса**: `POST`
- **Эндпоинт**: `/api/v1/loans/apply`
- **Тело запроса**:
  ```json
  {
    "customer_id": "67890",
    "loan_type": "personal",
    "amount": 10000.00,
    "currency": "USD",
    "term_in_months": 36,
    "annual_income": 50000.00,
    "purpose": "home improvement"
  }
  ```
- **Пример ответа**:
  ```json
  {
    "loan_application_id": "123456",
    "status": "under_review"
  }
  ```

#### Метод: `GetLoanStatus`
- **Описание**: Проверка статуса заявки на кредит.
- **Тип запроса**: `GET`
- **Эндпоинт**: `/api/v1/loans/{loan_application_id}/status`
- **Параметры**:
  - `loan_application_id` (string, path): Идентификатор заявки на кредит.
- **Пример ответа**:
  ```json
  {
    "loan_application_id": "123456",
    "status": "approved",
    "approved_amount": 9500.00,
    "approved_at": "2023-05-10T14:00:00Z"
  }
  ```

### 4. **Инвестиции**

#### Метод: `OpenInvestmentAccount`
- **Описание**: Открытие инвестиционного счёта.
- **Тип запроса**: `POST`
- **Эндпоинт**: `/api/v1/investments/accounts`
- **Тело запроса**:
  ```json
  {
    "customer_id": "67890",
    "account_type": "brokerage",
    "currency": "USD",
    "initial_investment": 5000.00
  }
  ```
- **Пример ответа**:
  ```json
  {
    "investment_account_id": "78901",
    "status": "active"
  }
  ```

#### Метод: `GetInvestmentPortfolio`
- **Описание**: Получение информации о текущем портфеле.
- **Тип запроса**: `GET`
- **Эндпоинт**: `/api/v1/investments/accounts/{investment_account_id}/portfolio`
- **Параметры**:
  - `investment_account_id` (string, path): Идентификатор инвестиционного счета.
- **Пример ответа**:
  ```json
  {
    "investment_account_id": "78901",
    "portfolio": [
      {
        "asset": "AAPL",
        "quantity": 10,
        "current_value": 1450.00,
        "currency": "USD"
      },
      {
        "asset": "GOOGL",
        "quantity": 5,
        "current_value": 1250.00,
        "currency": "USD"
      }
    ],
    "total_value": 2700.00,
    "currency": "USD"
  }
  ```

### 5. **Управление пользователями**

#### Метод: `GetCustomerProfile`
- **Описание**: Получение профиля клиента.
- **Тип запроса**: `GET`
- **Эндпоинт**: `/api/v1/customers/{customer_id}`
- **Параметры**:
  - `customer_id` (string, path): Идентификатор клиента.
- **Пример ответа**:
  ```json
  {
    "customer_id": "67890",
    "name": "John Doe",
    "email": "john.doe@example.com",
    "phone": "+1234567890",
    "address": "123 Main St, Cityville, Country",
    "created_at": "2023-01-01T10:00:00Z"
  }
  ```

#### Метод: `UpdateCustomerProfile`
- **Описание**: Обновление профиля клиента.
- **Тип запроса**: `PUT`
- **Эндпоинт**: `/api/v1/customers/{customer_id}`
- **Тело запроса**:
  ```json
  {
    "email": "new.email@example.com",
    "phone": "+0987654321",
    "address": "456 Secondary St, New City, Country"
  }
  ```
- **Пример ответа**:
  ```json
  {
    "status": "updated",
    "updated_at": "2023-04-15T10:00:00Z"
  }
  ```

### Общие требования к безопасности

Для всех методов API должны использоваться стандарты безопасности и аутентификации:
- **Аутентификация**: OAuth 2.0 или JWT для обеспечения безопасности и управления правами доступа.
- **Шифрование**: Все данные передаются с использованием TLS для защиты конфиденциальности.
  
Эти унифицированные спецификации покрывают основные потребности банковских организаций и позволяют гибко расширять функционал с учётом будущих потребностей.
